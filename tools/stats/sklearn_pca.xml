<tool id="sklearn_pca" name="Principal Component Analysis" version="0.1.0" python_template_version="3.5">
    <requirements>
        <requirement type="package" version="0.23.2">scikit-learn</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        python '$__tool_directory__/sklearn_pca.py' -i '$inputfile' -o '$outputfile' -n '$numcomp' -s '$skiprows' 
    ]]></command>
    <inputs>
        <param name="inputfile" type="data" format="tabular" label="Input file"/>
        <param name="numcomp" type="integer" value="10" label="Number of components"/>
        <param name="skiprows" type="integer" value="1" label="Number of rows to skip in input file (say 1, to skip the header)"/>
    </inputs>
    <outputs>
        <data name="outputfile" format_source="input" metadata_source="input"/>
    </outputs>
    <tests>
         <test>
            <param name="inputfile" value="mnist_digit_9.tsv" ftype="tabular"/>
            <param name="numcomp" value="784"/>
            <param name="skiprows" value="1"/>
            <output name="outputfile" ftype='data' file="mnist_digit_9_tr.tsv" compare="sim_size" delta_frac="0.0001"/>
        </test>
    </tests>
    <help><![CDATA[
        This tool takes a tabular input file and performs PCA, returning an equally sized tabular file with the first PC in first colum, second PC in econd column, and so on. 
    ]]></help>
    <citations>
        <citation type="bibtex">
          @article{scikit-learn,
            title={Scikit-learn: Machine Learning in {P}ython},
            author={Pedregosa, F. and Varoquaux, G. and Gramfort, A. and Michel, V.
                    and Thirion, B. and Grisel, O. and Blondel, M. and Prettenhofer, P.
                    and Weiss, R. and Dubourg, V. and Vanderplas, J. and Passos, A. and
                    Cournapeau, D. and Brucher, M. and Perrot, M. and Duchesnay, E.},
            journal={Journal of Machine Learning Research},
            volume={12},
            pages={2825--2830},
            year={2011}
          }
        </citation>
    </citations>
</tool>
